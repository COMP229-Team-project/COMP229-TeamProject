(self.webpackChunkendeavours=self.webpackChunkendeavours||[]).push([[424],{6424:(t,e,o)=>{"use strict";o.r(e),o.d(e,{AdminModule:()=>M});var r=o(7716),n=o(4655),s=o(4551);let i=(()=>{class t{constructor(t,e){this.router=t,this.auth=e}canActivate(t,e){return this.auth.authenticated?(console.log("authenticated"),!0):(console.log("cannot authenticate"),this.router.navigate(["/login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(n.F0),r.LFG(s.e))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();var a=o(4466);function u(t,e,o,r,n,s,i){try{var a=t[s](i),u=a.value}catch(l){return void o(l)}a.done?e(u):Promise.resolve(u).then(r,n)}var l=o(3679),c=o(7453),m=o(5377),f=o(3738),d=o(8583),p=o(8295),g=o(9983),h=o(1095);function w(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"h3"),r._uU(2,"Create Account"),r.qZA(),r.TgZ(3,"button",9),r.NdJ("click",function(){return r.CHM(t),r.oxw().changeType("login")}),r._uU(4," Returning user? "),r.qZA(),r.qZA()}}function v(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"h3"),r._uU(2,"Sign In"),r.qZA(),r.TgZ(3,"button",10),r.NdJ("click",function(){return r.CHM(t),r.oxw().changeType("signup")}),r._uU(4," New user? "),r.qZA(),r.qZA()}}function Z(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"h3"),r._uU(2,"Reset Password"),r.qZA(),r.TgZ(3,"button",11),r.NdJ("click",function(){return r.CHM(t),r.oxw().changeType("login")}),r._uU(4,"Back"),r.qZA(),r.qZA()}}function N(t,e){1&t&&(r.TgZ(0,"mat-error"),r._uU(1," You must enter a valid email address "),r.qZA())}function b(t,e){1&t&&(r.TgZ(0,"mat-error"),r._uU(1," Please Enter Your First Name "),r.qZA())}function y(t,e){if(1&t&&(r.TgZ(0,"mat-form-field",2),r._UZ(1,"input",12),r.YNc(2,b,2,0,"mat-error",0),r.qZA()),2&t){const t=r.oxw();r.Q6J("color",(null==t.firstName?null:t.firstName.valid)&&"accent"),r.xp6(2),r.Q6J("ngIf",(null==t.firstName?null:t.firstName.invalid)&&(null==t.firstName?null:t.firstName.dirty))}}function x(t,e){1&t&&(r.TgZ(0,"mat-error"),r._uU(1," Please Enter Your Last Name "),r.qZA())}function J(t,e){if(1&t&&(r.TgZ(0,"mat-form-field",2),r._UZ(1,"input",13),r.YNc(2,x,2,0,"mat-error",0),r.qZA()),2&t){const t=r.oxw();r.Q6J("color",(null==t.email?null:t.email.valid)&&"accent"),r.xp6(2),r.Q6J("ngIf",(null==t.lastName?null:t.lastName.invalid)&&(null==t.lastName?null:t.lastName.dirty))}}function I(t,e){1&t&&(r.TgZ(0,"mat-error"),r._uU(1," Password must be at least 6 characters long "),r.qZA())}function C(t,e){if(1&t&&(r.TgZ(0,"mat-form-field",2),r._UZ(1,"input",14),r.YNc(2,I,2,0,"mat-error",0),r.qZA()),2&t){const t=r.oxw();r.Q6J("color",(null==t.password?null:t.password.valid)&&"accent"),r.xp6(2),r.Q6J("ngIf",(null==t.password?null:t.password.invalid)&&(null==t.password?null:t.password.dirty))}}function q(t,e){1&t&&(r.TgZ(0,"mat-error"),r._uU(1," Password does not match "),r.qZA())}function T(t,e){if(1&t&&(r.TgZ(0,"mat-form-field",2),r._UZ(1,"input",15),r.YNc(2,q,2,0,"mat-error",0),r.qZA()),2&t){const t=r.oxw();r.Q6J("color",t.passwordDoesMatch?"accent":"warn"),r.xp6(2),r.Q6J("ngIf",(null==t.passwordConfirm?null:t.passwordConfirm.dirty)&&!t.passwordDoesMatch)}}function _(t,e){if(1&t&&(r.TgZ(0,"button",16),r._uU(1," Send Reset Email "),r.qZA()),2&t){const t=r.oxw();r.Q6J("disabled",t.loading)}}function A(t,e){if(1&t&&(r.TgZ(0,"button",17),r._uU(1," Submit "),r.qZA()),2&t){const t=r.oxw();r.Q6J("disabled",t.form.invalid||!t.passwordDoesMatch||t.loading)}}function k(t,e){if(1&t&&(r.TgZ(0,"button",17),r._uU(1," Submit "),r.qZA()),2&t){const t=r.oxw();r.Q6J("disabled",t.loading)}}function U(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",18),r.NdJ("click",function(){return r.CHM(t),r.oxw().changeType("reset")}),r._uU(1," Forgot password? "),r.qZA()}}const Q=[{path:"",component:(()=>{class t{constructor(t,e,o,r){this.fb=t,this.router=e,this.auth=o,this.restDataSoruce=r,this.type="login",this.loading=!1}ngOnInit(){this.user=new c.n,this.form=this.fb.group({firstName:["",[l.kI.required]],lastName:["",[l.kI.required]],email:["",[l.kI.required,l.kI.email]],password:["",[l.kI.minLength(6),l.kI.required]],passwordConfirm:["",[]]})}changeType(t){this.type=t}get isLogin(){return"login"===this.type}get isSignup(){return"signup"===this.type}get isPasswordReset(){return"reset"===this.type}get email(){return this.form.get("email")}get firstName(){return this.form.get("firstName")}get lastName(){return this.form.get("lastName")}get password(){return this.form.get("password")}get passwordConfirm(){return this.form.get("passwordConfirm")}get passwordDoesMatch(){var t,e;return"signup"!==this.type||(null===(t=this.password)||void 0===t?void 0:t.value)===(null===(e=this.passwordConfirm)||void 0===e?void 0:e.value)}register(t){t.valid&&(this.user.email=this.form.value.email,this.user.firstName=this.form.value.firstName,this.user.lastName=this.form.value.lastName,this.user.password=this.form.value.password,this.auth.register(this.user).subscribe(t=>{t.success?(console.log({data:t,type:typeof t}),this.restDataSoruce.storeUserData(t.token,t.user),this.router.navigateByUrl("dashboard")):this.serverMessage=t}))}authenticate(t){console.log({fromComponent:this.user}),this.user.email=this.form.value.email,this.user.password=this.form.value.password,this.auth.authenticate(this.user).subscribe(t=>{console.log({data:t,type:typeof t}),t.success?(this.restDataSoruce.storeUserData(t.token,t.user),this.router.navigateByUrl("dashboard")):this.serverMessage=t})}onSubmit(){var t,e=this;return(t=function*(){e.loading=!0;try{e.isLogin&&e.authenticate(e.form),e.isSignup&&e.register(e.form),e.isPasswordReset&&(console.log("hello"),e.serverMessage="Check your email")}catch(t){e.serverMessage=t}e.loading=!1},function(){var e=this,o=arguments;return new Promise(function(r,n){var s=t.apply(e,o);function i(t){u(s,r,n,i,a,"next",t)}function a(t){u(s,r,n,i,a,"throw",t)}i(void 0)})})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(l.qu),r.Y36(n.F0),r.Y36(s.e),r.Y36(m.U))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-email-password-auth"]],decls:18,vars:15,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[3,"color"],["matInput","","formControlName","email","type","email","placeholder","Email","autocomplete","off"],[3,"color",4,"ngIf"],[1,"server-error"],["mat-stroked-button","","type","submit",3,"disabled",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["mat-button","",3,"click",4,"ngIf"],["mat-stroked-button","",3,"click"],["size","small","mat-stroked-button","",3,"click"],["size","small","mat-button","",3,"click"],["matInput","","formControlName","firstName","type","text","placeholder","First Name","autocomplete","off"],["matInput","","formControlName","lastName","type","text","placeholder","Last Name","autocomplete","off"],["matInput","","formControlName","password","type","password","placeholder","Password","autocomplete","off"],["matInput","","formControlName","passwordConfirm","type","password","placeholder","Confirm password","autocomplete","off"],["mat-stroked-button","","type","submit",3,"disabled"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"mat-card"),r.YNc(1,w,5,0,"div",0),r.YNc(2,v,5,0,"div",0),r.YNc(3,Z,5,0,"div",0),r.TgZ(4,"form",1),r.NdJ("ngSubmit",function(){return e.onSubmit()}),r.TgZ(5,"mat-form-field",2),r._UZ(6,"input",3),r.YNc(7,N,2,0,"mat-error",0),r.qZA(),r.YNc(8,y,3,2,"mat-form-field",4),r.YNc(9,J,3,2,"mat-form-field",4),r.YNc(10,C,3,2,"mat-form-field",4),r.YNc(11,T,3,2,"mat-form-field",4),r.TgZ(12,"mat-error",5),r._uU(13),r.qZA(),r.YNc(14,_,2,1,"button",6),r.YNc(15,A,2,1,"button",7),r.YNc(16,k,2,1,"button",7),r.qZA(),r.YNc(17,U,2,0,"button",8),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngIf",e.isSignup),r.xp6(1),r.Q6J("ngIf",e.isLogin),r.xp6(1),r.Q6J("ngIf",e.isPasswordReset),r.xp6(1),r.Q6J("formGroup",e.form),r.xp6(1),r.Q6J("color",(null==e.email?null:e.email.valid)&&"accent"),r.xp6(2),r.Q6J("ngIf",(null==e.email?null:e.email.invalid)&&(null==e.email?null:e.email.dirty)),r.xp6(1),r.Q6J("ngIf",e.isSignup),r.xp6(1),r.Q6J("ngIf",e.isSignup),r.xp6(1),r.Q6J("ngIf",!e.isPasswordReset),r.xp6(1),r.Q6J("ngIf",e.isSignup),r.xp6(2),r.Oqu(e.serverMessage),r.xp6(1),r.Q6J("ngIf",e.isPasswordReset),r.xp6(1),r.Q6J("ngIf",e.isSignup),r.xp6(1),r.Q6J("ngIf",e.isLogin),r.xp6(1),r.Q6J("ngIf",e.isLogin&&!e.isPasswordReset))},directives:[f.a8,d.O5,l._Y,l.JL,l.sg,p.KE,g.Nt,l.Fj,l.JJ,l.u,p.TO,h.lW],styles:["mat-card[_ngcontent-%COMP%]{max-width:500px;width:90%;margin:0 auto}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.server-error[_ngcontent-%COMP%]{margin:8px 0}input[_ngcontent-%COMP%]{height:2em}input[_ngcontent-%COMP%]   div.mat-form-field-infix[_ngcontent-%COMP%]{padding:.3em 0}input[_ngcontent-%COMP%]   div.mat-form-field-infix[_ngcontent-%COMP%]   input.mat-input-element[_ngcontent-%COMP%]{vertical-align:top}div.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.15em}"]}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[n.Bz.forChild(Q)],n.Bz]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[i],imports:[[a.m,Y]]}),t})()}}]);